{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Libros - BiblioVirtual</title>
    <link rel="stylesheet" href="{% static 'css/catalogo.css' %}">
    <!-- Fuente de Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="https://via.placeholder.com/40/10b981/FFFFFF?text=B" alt="Logo BiblioVirtual">
                <h1>BiblioVirtual</h1>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="{% url 'inicio' %}">Inicio</a></li>
                    <li><a href="{% url 'catalogo' %}" class="active">Catálogo</a></li>
                    <li><a href="{% url 'prestamos' %}">Prestamos</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <a href="{% url 'login' %}" class="btn btn-outline">Iniciar Sesión</a>
                <a href="{% url 'registro' %}" class="btn btn-primary">Registrarse</a>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <ul>
            <li><a href="{% url 'inicio' %}">Inicio</a></li>
            <li><a href="{% url 'catalogo' %}" class="active">Catálogo</a></li>
            <li><a href="{% url 'prestamos' %}">Prestamos</a></li>
            <li class="mobile-auth">
                    <!-- Falta agregar la lógica -->
                <a href="{% url 'login' %}" class="btn btn-outline">Iniciar Sesión</a>
                <a href="{% url 'registro' %}" class="btn btn-primary">Registrarse</a>
            </li>
        </ul>
    </div>

    <main>
        <div class="catalog-container">
            <div class="container">
                <div class="catalog-header">
                    <h2>Catálogo de Libros</h2>
                    <p>Explora nuestra colección de libros y encuentra tu próxima lectura</p>
                </div>

                <div class="catalog-layout">
                    <!-- Filtros de búsqueda avanzada -->
                    <aside class="catalog-filters">
                        <div class="filter-header">
                            <h3>Búsqueda Avanzada</h3>
                            <button class="toggle-filters" id="toggleFilters">
                                <i class="fas fa-sliders-h"></i>
                            </button>
                        </div>

                        <div class="filters-body" id="filtersBody">
                            <div class="search-box">
                                <input type="text" id="searchInput" placeholder="Buscar por título, autor...">
                                <button class="search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>

                            <div class="filter-group">
                                <h4>Categorías</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" name="category" value="ficcion">
                                        <span>Ficción</span>
                                        <span class="count">(42)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="category" value="no-ficcion">
                                        <span>No Ficción</span>
                                        <span class="count">(38)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="category" value="ciencia">
                                        <span>Ciencia</span>
                                        <span class="count">(24)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="category" value="historia">
                                        <span>Historia</span>
                                        <span class="count">(19)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="category" value="biografia">
                                        <span>Biografía</span>
                                        <span class="count">(15)</span>
                                    </label>
                                </div>
                                <button class="show-more">Ver más</button>
                            </div>

                            <div class="filter-group">
                                <h4>Autores</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" name="author" value="gabriel-garcia-marquez">
                                        <span>Gabriel García Márquez</span>
                                        <span class="count">(8)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="author" value="isabel-allende">
                                        <span>Isabel Allende</span>
                                        <span class="count">(6)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="author" value="julio-cortazar">
                                        <span>Julio Cortázar</span>
                                        <span class="count">(5)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="author" value="mario-vargas-llosa">
                                        <span>Mario Vargas Llosa</span>
                                        <span class="count">(7)</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="author" value="jorge-luis-borges">
                                        <span>Jorge Luis Borges</span>
                                        <span class="count">(9)</span>
                                    </label>
                                </div>
                                <button class="show-more">Ver más</button>
                            </div>

                            <div class="filter-group">
                                <h4>Año de Publicación</h4>
                                <div class="range-slider">
                                    <div class="range-values">
                                        <span id="yearMin">1950</span>
                                        <span id="yearMax">2023</span>
                                    </div>
                                    <div class="range-inputs">
                                        <input type="range" id="yearMinRange" min="1950" max="2023" value="1950" class="range">
                                        <input type="range" id="yearMaxRange" min="1950" max="2023" value="2023" class="range">
                                    </div>
                                </div>
                            </div>

                            <div class="filter-group">
                                <h4>Disponibilidad</h4>
                                <div class="filter-options">
                                    <label class="filter-option">
                                        <input type="checkbox" name="availability" value="disponible" checked>
                                        <span>Disponible</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="availability" value="prestado">
                                        <span>Prestado</span>
                                    </label>
                                    <label class="filter-option">
                                        <input type="checkbox" name="availability" value="reservado">
                                        <span>Reservado</span>
                                    </label>
                                </div>
                            </div>

                            <div class="filter-group">
                                <h4>Calificación</h4>
                                <div class="rating-filter">
                                    <label class="rating-option">
                                        <input type="radio" name="rating" value="5">
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <span>y más</span>
                                    </label>
                                    <label class="rating-option">
                                        <input type="radio" name="rating" value="4">
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span>y más</span>
                                    </label>
                                    <label class="rating-option">
                                        <input type="radio" name="rating" value="3">
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span>y más</span>
                                    </label>
                                    <label class="rating-option">
                                        <input type="radio" name="rating" value="2">
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span>y más</span>
                                    </label>
                                    <label class="rating-option">
                                        <input type="radio" name="rating" value="1">
                                        <div class="stars">
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span>y más</span>
                                    </label>
                                </div>
                            </div>

                            <div class="filter-actions">
                                <button class="btn btn-outline" id="resetFilters">Restablecer</button>
                                <button class="btn btn-primary" id="applyFilters">Aplicar Filtros</button>
                            </div>
                        </div>
                    </aside>

                    <!-- Resultados del catálogo -->
                    <div class="catalog-results">
                        <div class="results-header">
                            <div class="results-count">
                                <span>Mostrando 1-12 de 156 resultados</span>
                            </div>
                            <div class="results-sort">
                                <label for="sortBy">Ordenar por:</label>
                                <select id="sortBy">
                                    <option value="relevance">Relevancia</option>
                                    <option value="newest">Más recientes</option>
                                    <option value="oldest">Más antiguos</option>
                                    <option value="title-asc">Título (A-Z)</option>
                                    <option value="title-desc">Título (Z-A)</option>
                                    <option value="rating-desc">Mejor calificados</option>
                                </select>
                            </div>
                            <div class="view-options">
                                <button class="view-option active" data-view="grid">
                                    <i class="fas fa-th-large"></i>
                                </button>
                                <button class="view-option" data-view="list">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                        </div>

                        <div class="books-grid" id="booksContainer">
                        {% for libro in libros %}
                        <div class="book-card">
                            <div class="book-cover">
                                {% if libro.portada %}
                                    <img src="{{ libro.portada.url }}" alt="{{ libro.titulo }}">
                                {% else %}
                                    <img src="https://via.placeholder.com/120x160?text=Sin+Portada" alt="Sin portada">
                                {% endif %}
                                <div class="book-availability {% if libro.disponibilidad %}available{% else %}borrowed{% endif %}">
                                    <span>{% if libro.disponibilidad %}Disponible{% else %}Prestado{% endif %}</span>
                                </div>
                            </div>
                            <div class="book-info">
                                <h3 class="book-title">{{ libro.titulo }}</h3>
                                <p class="book-author">{{ libro.autor }}</p>
                                <div class="book-meta">
                                    <span class="book-category">{{ libro.genero.nombre_genero }}</span>
                                    <span class="book-year">{{ libro.año_publicacion }}</span>
                                </div>
                                <div class="book-actions">
                                    <button class="btn btn-outline btn-sm">
                                        <i class="far fa-heart"></i>
                                        Guardar
                                    </button>
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fas fa-book-open"></i>
                                        Leer
                                    </button>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <p>No hay libros disponibles en este momento.</p>
                        {% endfor %}
                        </div>

                        <div class="pagination">
                            <button class="pagination-btn" disabled>
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">4</button>
                            <span class="pagination-ellipsis">...</span>
                            <button class="pagination-btn">13</button>
                            <button class="pagination-btn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="https://via.placeholder.com/40/10b981/FFFFFF?text=B" alt="Logo BiblioVirtual">
                    <h3>BiblioVirtual</h3>
                </div>
                <p>© <span id="currentYear"></span> BiblioVirtual. Todos los derechos reservados.</p>
                <div class="footer-links">
                    <a href="#">Términos</a>
                    <a href="#">Privacidad</a>
                    <a href="#">Ayuda</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/catalogo.js'%}"></script>
</body>
</html>